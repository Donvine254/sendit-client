generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["relationJoins"]
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model Parcel {
  id              String       @id @default(cuid())
  userId          String
  weight          Float
  description     String
  status          ParcelStatus @default(PENDING)
  price           Float
  pickupAddress   Json         @default("{\"street\": \"\", \"city\": \"\", \"state\": \"\", \"postalCode\": \"\", \"country\": \"\"}")
  deliveryAddress Json         @default("{\"street\": \"\", \"city\": \"\", \"state\": \"\", \"postalCode\": \"\", \"country\": \"\"}")
  createdAt       DateTime     @default(now())
  updatedAt       DateTime     @updatedAt

  @@index([userId])
}

model shippingAddress {
  id       String @id @default(cuid())
  userId   String
  fullName String
  phone    Int
  email    String
  region   String
  city     String
  district String
  location String
}

model Invoice {
  id               String        @id @default(cuid())
  invoice_number   Int           @unique @default(autoincrement())
  fullName         String
  shipping_address String
  item             String
  amount           Int
  userId           String
  parcelId         String
  status           InvoiceStatus @default(DRAFT)
}

enum ParcelStatus {
  PENDING
  IN_TRANSIT
  DELIVERED
  CANCELLED
}

enum InvoiceStatus {
  DRAFT
  PAID
  OVERDUE
  DISPUTED
}
